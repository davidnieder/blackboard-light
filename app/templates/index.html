{% extends "base.html" %}

{% block title %}
  <title>Page {{ current_page }} - Blackboard Light</title>
{% endblock %}

{% block content %}
  <section id="content">
  {% if post_list %}
    {% for post in post_list %}
    <article id="post-{{ post.id }}">
      <header><h4>{{ post.title }}</h4></header>
      <div class="post-content"><p>{{ post.content |safe }}</div>
      <footer>
        <a href="{{ url_for('.index', postId=post.id) }}">#{{ post.id }}</a> from
        <a href="{{ url_for('.index', user=post.user) }}">{{ post.user }}</a> on
        <a href="{{ url_for('.index', createdOn=post.time.date().isoformat()) }}">
        {{ post.time |date }}</a>
        {%- for tag in post.tags %}
        {% if loop.first %} | {% endif -%}
        <a href="{{ url_for('.index', tags=tag) }}">{{ tag }}</a>
        {%- if not loop.last %}, {% endif %}
        {% endfor %}
        {% if current_user.name == post.user or current_user.is_admin %}
        <div class="admin-links">
          <a href="{{ url_for('.edit_post', postId=post.id) }}">edit post</a> |
          <a href="{{ url_for('.delete_post', postId=post.id, csrfToken=csrf_token()) }}">delete post</a>
        </div>
        {%- endif %}

      </footer>
    </article>

    {% endfor %}
    <section id="page-links">
    <p><hr>
      {% if prev_page %}
      <a href="{{ url_for('.index', page=prev_page, **query_args) }}">&larr; previous page</a>
      {% endif %}
      {% if prev_page and next_page %}|{% endif %}
      {% if next_page %}
      <a href="{{ url_for('.index', page=next_page, **query_args) }}">next page &rarr;</a>
      {% endif %}
    </section>
  {% endif %}
  </section>  <!-- end block content -->
{% endblock %}
